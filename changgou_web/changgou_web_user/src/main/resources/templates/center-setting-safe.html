<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
        <title>设置-个人信息</title>
        <link rel="icon" href="/img/favicon.ico">

        <link rel="stylesheet" type="text/css" href="/css/all.css"/>
        <link rel="stylesheet" type="text/css" href="/css/pages-seckillOrder.css"/>
        <script type="text/javascript" src="/js/vue.js"></script>
        <link rel="stylesheet" href="/css/index.css">
        <script type="text/javascript" src="/js/index.js"></script>
        <script type="text/javascript" src="/js/jquery.min.js"></script>
        <script type="text/javascript" src="/js/sui.min.js"></script>
        <script type="text/javascript" src="/js/axios.js"></script>

    </head>

    <body>
        <!-- 头部栏位 -->
        <!--页面顶部-->
        <div id="app">
            <div id="nav-bottom">
                <!--顶部-->
                <div class="nav-top">
                    <div class="top">
                        <div class="py-container">
                            <div class="shortcut">
                                <ul class="fl" th:unless="${username != null}">
                                    <li class="f-item">畅购欢迎您！</li>
                                    <li class="f-item">请
                                        <a
                                                th:href="|/api/oauth/toLogin?FROM=http://localhost:8001/api/wuser/index|"
                                                target="_self">登录</a>
                                        <span>
									<a th:href="|/api/wuser/register|" target="_self">免费注册</a>
								</span>
                                    </li>
                                </ul>
                                <ul class="fl" th:unless="${username == null}">
                                    <li class="f-item">畅购欢迎您！</li>
                                    <li class="f-item">
                                        <em th:text="${username}" style="color: #ff3835"></em>
                                        <span>
									<a th:href="|/api/wuser/exit|">退出</a>
								</span>
                                    </li>
                                </ul>
                                <div class="fr typelist">
                                    <ul class="types">
                                        <li class="f-item">
                                            <span>我的订单</span>
                                        </li>

                                        <li class="f-item">
									<span>
										<a href="http://localhost:8001/api/wcart/list" target="_self">我的购物车</a>
									</span>
                                        </li>
                                        <li class="f-item">
									<span th:unless="${username ==null}">
										<a th:href="|/api/wuser/user|">个人中心</a>
									</span>
                                        </li>
                                        <li class="f-item">
                                            <span>畅购会员</span>
                                        </li>
                                        <li class="f-item">
                                            <span>企业采购</span>
                                        </li>
                                        <li class="f-item">
                                            <span>关注畅购</span>
                                        </li>
                                        <li class="f-item">
									<span>
										<a href="cooperation.html" target="_blank">合作招商</a>
									</span>
                                        </li>
                                        <li class="f-item">
									<span>
										<a href="shoplogin.html" target="_blank">商家后台</a>
									</span>
                                        </li>
                                        <li class="f-item">
                                            <span>网站导航</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--头部-->
                    <div class="header">
                        <div class="py-container">
                            <div class="yui3-g Logo">
                                <div class="yui3-u Left logoArea">
                                    <a class="logo-bd" title="畅购" th:href="@{/api/wuser/index}"></a>
                                </div>
                                <div class="yui3-u Rit searchArea">
                                    <div class="search">
                                        <form th:action="@{/api/search/list}" class="sui-form form-inline">
                                            <div class="input-append">
                                                <input th:type="text" id="autocomplete" name="keyWords"
                                                       class="input-error input-xxlarge"/>
                                                <button class="sui-btn btn-xlarge btn-danger" th:type="submit">搜索
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!--header-->
            <div id="account">
                <div class="py-container">
                    <div class="yui3-g home">
                        <!--左侧列表-->
                        <div class="yui3-u-1-6 list">

                            <div class="person-info">
                                <div class="person-photo"><img
                                        src="http://192.168.200.128:8080/group1/M00/00/00/wKjIgF4fMhqAUqb_AAobTYlR3js265.jpg"
                                        style="width: 48px;height: 48px" alt=""></div>
                                <div class="person-account">
                                    <span class="name" th:text="${username}"></span>
                                    <span class="safe">账户安全</span>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="list-items">
                                <dl>
                                    <dt><i>·</i> 订单中心</dt>
                                    <dd><a th:href="|/api/wuser/user|">我的订单</a></dd>
                                    <dd><a href="center-order-pay.html">待付款</a></dd>
                                    <dd><a href="center-order-send.html">待发货</a></dd>
                                    <dd><a href="center-order-receive.html">待收货</a></dd>
                                    <dd><a href="center-order-evaluate.html">待评价</a></dd>
                                </dl>
                                <dl>
                                    <dt><i>·</i> 我的中心</dt>
                                    <dd><a th:href="|/api/wcollect/list|">我的收藏</a></dd>
                                    <dd><a th:href="|/api/wcollect/list2FootMark|">我的足迹</a></dd>
                                </dl>
                                <dl>
                                    <dt><i>·</i> 设置</dt>
                                    <dd><a th:href="|/api/wcenter/toCenterInfo|">个人信息</a></dd>
                                    <dd><a th:href="|/api/waddress/toCenterAddress|">地址管理</a></dd>
                                    <dd><a th:href="@{/api/wcenter/toSafe}" class="list-active">安全管理</a></dd>
                                </dl>
                            </div>
                        </div>
                        <!--右侧主内容-->
                        <div class="yui3-u-5-6">
                            <div class="body userSafe">
                                <ul class="sui-nav nav-tabs nav-large nav-primary ">
                                    <li class="active"><a href="#one" data-toggle="tab">验证手机</a></li>
                                    <li><a href="#two" data-toggle="tab">密码设置</a></li>
                                </ul>
                                <div class="tab-content ">
                                    <!--<div id="one" class="tab-pane active">
                                        <form class="sui-form form-horizontal sui-validate" id="jsForm">

                                            <div class="control-group">
                                                <label for="inputPassword" class="control-label">密码：</label>
                                                <div class="controls">
                                                    <input class="fn-tinput" type="password" name="password" value=""
                                                        placeholder="新密码" required id="password" data-rule-remote="php.php">
                                                </div>
                                            </div>

                                            <div class="control-group">
                                                <label class="control-label"></label>
                                                <div class="controls">
                                                    <button type="submit" class="sui-btn btn-primary">提交按钮</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>-->
                                    <div id="two" class="tab-pane">
                                        <!--步骤条-->
                                        <div class="sui-steps steps-auto">
                                            <div class="wrap">
                                                <div class="finished">
                                                    <label><span class="round"><i
                                                            class="sui-icon icon-pc-right"></i></span><span>第一步
													验证身份</span></label><i class="triangle-right-bg"></i><i
                                                        class="triangle-right"></i>
                                                </div>
                                            </div>
                                            <div class="wrap">
                                                <div class="todo">
                                                    <label><span class="round">2</span><span>第二步 密码设置</span></label><i
                                                        class="triangle-right-bg"></i><i class="triangle-right"></i>
                                                </div>
                                            </div>
                                            <div class="wrap">
                                                <div class="todo">
                                                    <label><span class="round">3</span><span>第三步 完成</span></label>
                                                </div>
                                            </div>
                                        </div>

                                        <!--表单-->

                                        <form class="sui-form form-horizontal sui-validate" data-toggle='validate'
                                              id="bind-form">

                                            <div class="control-group">
                                                <label class="control-label">验证方式：</label>
                                                <div class="controls fixed">手机验证:({{phone}})</div>
                                            </div>

                                            <div class="control-group">
                                                <label class="control-label">短信验证码：</label>
                                                <div class="controls">
                                                    <input name="msgcode" type="text" id="msgcode" v-model="verificationCode">
                                                </div>
                                                <div class="controls">
                                                    <!--											<button @click="sendSms()" class="sui-btn btn-info">发送</button>-->
                                                    <a href="javascript:void(0)" @click="sendSms">发送短信验证码</a>
                                                </div>
                                            </div>
                                            <div class="control-group next-btn">
<!--                                                seckillsetting-address-phone.html-->
                                                <a class="sui-btn btn-primary" href="javascript:void(0)" @click="verification">下一步</a>
                                            </div>
                                        </form>
                                    </div>
                                </div>
验证
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 底部栏位 -->
            <!--页面底部-->
            <div class="clearfix footer">
                <div class="py-container">
                    <div class="footlink">
                        <div class="Mod-service">
                            <ul class="Mod-Service-list">
                                <li class="grid-service-item intro  intro1">

                                    <i class="serivce-item fl"></i>
                                    <div class="service-text">
                                        <h4>正品保障</h4>
                                        <p>正品保障，提供发票</p>
                                    </div>

                                </li>
                                <li class="grid-service-item  intro intro2">

                                    <i class="serivce-item fl"></i>
                                    <div class="service-text">
                                        <h4>正品保障</h4>
                                        <p>正品保障，提供发票</p>
                                    </div>

                                </li>
                                <li class="grid-service-item intro  intro3">

                                    <i class="serivce-item fl"></i>
                                    <div class="service-text">
                                        <h4>正品保障</h4>
                                        <p>正品保障，提供发票</p>
                                    </div>

                                </li>
                                <li class="grid-service-item  intro intro4">

                                    <i class="serivce-item fl"></i>
                                    <div class="service-text">
                                        <h4>正品保障</h4>
                                        <p>正品保障，提供发票</p>
                                    </div>

                                </li>
                                <li class="grid-service-item intro intro5">

                                    <i class="serivce-item fl"></i>
                                    <div class="service-text">
                                        <h4>正品保障</h4>
                                        <p>正品保障，提供发票</p>
                                    </div>

                                </li>
                            </ul>
                        </div>
                        <div class="clearfix Mod-list">
                            <div class="yui3-g">
                                <div class="yui3-u-1-6">
                                    <h4>购物指南</h4>
                                    <ul class="unstyled">
                                        <li>购物流程</li>
                                        <li>会员介绍</li>
                                        <li>生活旅行/团购</li>
                                        <li>常见问题</li>
                                        <li>购物指南</li>
                                    </ul>

                                </div>
                                <div class="yui3-u-1-6">
                                    <h4>配送方式</h4>
                                    <ul class="unstyled">
                                        <li>上门自提</li>
                                        <li>211限时达</li>
                                        <li>配送服务查询</li>
                                        <li>配送费收取标准</li>
                                        <li>海外配送</li>
                                    </ul>
                                </div>
                                <div class="yui3-u-1-6">
                                    <h4>支付方式</h4>
                                    <ul class="unstyled">
                                        <li>货到付款</li>
                                        <li>在线支付</li>
                                        <li>分期付款</li>
                                        <li>邮局汇款</li>
                                        <li>公司转账</li>
                                    </ul>
                                </div>
                                <div class="yui3-u-1-6">
                                    <h4>售后服务</h4>
                                    <ul class="unstyled">
                                        <li>售后政策</li>
                                        <li>价格保护</li>
                                        <li>退款说明</li>
                                        <li>返修/退换货</li>
                                        <li>取消订单</li>
                                    </ul>
                                </div>
                                <div class="yui3-u-1-6">
                                    <h4>特色服务</h4>
                                    <ul class="unstyled">
                                        <li>夺宝岛</li>
                                        <li>DIY装机</li>
                                        <li>延保服务</li>
                                        <li>畅购E卡</li>
                                        <li>畅购通信</li>
                                    </ul>
                                </div>
                                <div class="yui3-u-1-6">
                                    <h4>帮助中心</h4>
                                    <img src="/img/wx_cz.jpg">
                                </div>
                            </div>
                        </div>
                        <div class="Mod-copyright">
                            <ul class="helpLink">
                                <li>关于我们<span class="space"></span></li>
                                <li>联系我们<span class="space"></span></li>
                                <li>关于我们<span class="space"></span></li>
                                <li>商家入驻<span class="space"></span></li>
                                <li>营销中心<span class="space"></span></li>
                                <li>友情链接<span class="space"></span></li>
                                <li>关于我们<span class="space"></span></li>
                                <li>营销中心<span class="space"></span></li>
                                <li>友情链接<span class="space"></span></li>
                                <li>关于我们</li>
                            </ul>
                            <p>地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100</p>
                            <p>京ICP备08001421号京公网安备110108007702</p>
                        </div>
                    </div>
                </div>
            </div>
            <!--页面底部END-->
        </div>


    </body>

    <script th:inline="javascript">
        new Vue({
            el: '#app',
            data: {
                user: '',
                phone: '',
                verificationCode:''
            },
            methods: {
                sendSms() {
                    axios.get("/api/wuser/send?phone=" + this.user.phone).then(response => {
                        if (response.data.success) {
                            app.message = response.data.message;
                        } else {
                            app.message = response.data.message;
                        }
                    });
                },
                getUsername() {
                    axios.get("/api/wcenter/getUsername").then((res) => {
                        this.user = res.data.data;
                        var phone = res.data.data.phone;
                        let s = phone.substring(0, 3);
                        let s1 = phone.substring(7, 11);
                        this.phone = s + "****" + s1;
                    })
                },
                verification() {
                    axios.get("/api/wcenter/verification?code="+this.verificationCode+""+"&phone="+this.user.phone).then((res)=>{
                        if(res.data.success){
                            location.href="http://localhost:8001/api/wcenter/toReset"
                        }else{
                            alert(res.data.message);
                        }
                    })
                }

            },
            created() {
                this.getUsername();
            }
        })

    </script>

</html>